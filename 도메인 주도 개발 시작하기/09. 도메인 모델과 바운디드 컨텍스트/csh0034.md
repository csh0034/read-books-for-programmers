# 09. 도메인 모델과 바운디드 컨텍스트

## 9.1 도메인 모델과 경계

하위 도메인 마다 같은 용어라도 의미가 다르고 같은 대상이라도 지칭하는 용어가 다를수 있다.

하위 도메인 마다 사용하는 용어가 다르므로 올바른 도메인 모델 개발을 위해선  
하위 도메인 마다 모델을 만들어야 한다.

모델은 특정한 컨텍스트(문맥) 하에서 완전한 의미르 갖는다.  
같은 제품이라도 컨텍스트에 따라 의미가 다르다. 

이렇게 구분되는 경계를 갖는 컨텍스트를 DDD 에선 바운디드 컨텍스트라고 부른다.

## 9.2 바운디드 컨텍스트

바운디드 컨텍스트는 모델의 경계를 결정하며, 한 개의 바운디드 컨텍스트는 논리적으로 한 개의 모델을 갖는다.  
바운디드 컨텍스트는 용어를 기준으로 구분한다.

바운디드 컨텍스트는 실제로 사용자에게 기능을 제공하는 물리적 시스템으로   
도메인 모델은 이 바운디드 컨텍스트 안에서 도메인을 구현한다.

이상적으로 하위 도메인과 바운디드 컨텍스트가 일대일 관계를 가지면 좋겠지만  
그렇지 않을 때가 많으며 기업의 팀 조직 구조에 따라 결정되기도 한다.

![01.png](img/01.png)

규모가 작은 기업은 전체 시스템을 한 개 팀에서 구현할 때도 있다.

여러 하위 도메인을 하나의 바운디드 컨텍스트에서 개발할 때 주의할 점은  
하위 도메인의 모델이 섞이지 않도록 하는것이다.  
아무래도 전체 하위 도메인을 위한 단일 모델을 만들고 싶은 유혹에 빠지기 쉽다.

비록 한 개의 바운디드 컨텍스트가 여러 하위 도메인을 포함하더라도 하위 도메인마다  
구분되는 패키지를 갖도록 구현하여 하위 도메인을 위한 모델이 뒤섞이지 않도록 하는 효과를 낼 수있다.

![02.png](img/02.png)

바운디드 컨텍스트는 도메인 모델을 구분하는 경계가 되기 때문에  
구현 하는 하위 도메인에 알맞는 모델을 포함한다.

![03.png](img/03.png)

## 9.3 바운디드 컨텍스트 구현

바운디드 컨텍스트는 도메인 모델만 포함하는 것은 아니다.  
도메인 기능을 사용자에게 제공하기 위해 표현 영역, 응용 서비스, 인프라 영역 등을 모두 포함한다.

도메인 모델의 구조가 바뀌면 DB 테이블 스키마도 함께 변경해야 하므로  
해당 테이블도 바운디드 컨텍스트에 포함된다.

![04.png](img/04.png)

모든 바운디드 컨텍스트를 반드시 도메인 주도로 개발할 필요는 없다.  
복잡한 도메인 로직이 없을 경우 서비스-DAO 구조를 사용할수도 있다.

![05.png](img/05.png)

한 바운디드 컨텍스트에서 두 방식을 혼합해서 사용할 수도 있다.  
대표적인 예가 CQRS 패턴이다.

CQRS(Command Query Responsibility Segregation)는 상태를 변경하는 명령 기능과   
내용을 조회하는 쿼리 기능을 위한 모델을 구분하는 패턴이다.

![06.png](img/06.png)

각 바운디드 컨텍스트는 서로 다른 구현 기술을 사용할 수도 있다.  
바운디드 컨텍스트가 반드시 사용자에게 보여지는 UI를 갖지 않고 JSON 으로 응답할 수도 있다.

## 9.4 바운디드 컨텍스트 간 통합

## 9.5 바운디드 컨텍스트 간 관계

## 9.6 컨텍스트 맵
