# 1장. 나에게 도메인 주도 설계는

우리는 실력을 향상 시키고 프로젝트에서 성공할 확률을 높이려고 한다.  
또한 비즈니스 요구를 정확하게 모델링할 뿐만 아니라 최상의 소프트웨어 아키텍처로  
규모에 맞게 수행되는 소프트웨어를 구현하길 원한다.

도메인 주도 설계(DDD) 는 이런 것들과 그 이상의 것을 달성할 수 있도록 도와준다.

## DDD가 우리게에 상처를 줄까?

**DDD 는 복잡하다?**  
사실, 접근 자체가 복잡한것이 아닌 정확하게는 복잡한 소프트웨어 프로젝트에 사용할 수  
있는 수준 높은 기술들을 모은것이다. 

의도적으로 DDD 의 기술만을 요약했기 때문에 심층적인 내용은 `도메인 주도 설계 구현` 을 추천.

DDD 가 프로젝트의 복잡성을 이기는 데 수반되는 고통을 줄이기 위해 도움을 줄 것이다.

## 좋은, 나쁜 그리고 효과적인 설계

많은 소프트웨어 개발 팀이 설계를 그다지 중요하게 생각 하지 않는다.  
대신 `작업 보드 셔플` 이라는것을 하는데 여기에는 팀의 개발 작업 목록이 있다.
> 추가) 레드마인과 같은 pms(Project Management System) 에서 작업단위로 개인에게 할당하는것을 말하는것 같다.

`작업 보드 셔플` 을 수행하는것이 일의 전부로 여기고 나머지는 프로그래머가 코드 작성만 하면된다 라고 생각한다.  
이는 잘 드러나지도 않고 존재하지도 않는 설계에 엄청난 비즈니스 비용을 쏟아붓는 일이다.

이런 방식은 경영진이 `지식 획득` 은 감안하지 않고 일정 관리를 위해 정해진 일정 내에  
소프트웨어를 릴리즈를 해야한다는 압박감으로 인해 자주 발생한다.

이러한 문제가 발생하는 곳은 소프트웨어 프로젝트는 위험에 빠져 있고  
모든 팀들은 유지보수와 모드 및 데이터 패치를 위해 존재한다.

또한 하단과 같은 다양한 문제가 발생한다.

- 소프트웨어 개발이 이익 중심이 아닌 원가 중심으로 생각한다.
- 개발자가 기술에만 몰두한 나머지 문제에 대한 연구 및 설계보단 기술적으로 해결하려고한다.
- 데이터베이스에 너무 큰 우선순위를 부여하고 대부분의 논의가 DB 주변 솔루션 데이터 모델링에 집중한다.
- 비즈니스 목적에 따라 클래스이름 오퍼레이션 이름을 짓는것에 크게 관심이 없다.  
  이는 비즈니스가 담고 있는 멘탈 모델과 개발자가 만든 소프트웨어 사이에 큰 차이를 야기한다.
- 개발과 비즈니스 사이의 협업이 빈약하기 때문이며 개발자들이 일부분만 보는 명세서 작성에 시간을 쏟는다.
- 프로젝트에 대한 예측을 강하게 요구하여 설계보단 작업단위 처리가 우선시 되며  
  이는 적절하게 분산된 적절한 크기의 모델이 아닌 아주 큰 진흙 덩어리가 만들어진다.
- 개발자가 실제 구체적인 비즈니스 요구 대신, 현재와 상상 속 미래의 요구를 모두 고려해서 과도하게  
  일반하된 해결방안을 선택한탓에 잘못된 추상화가 존재한다.
- 오퍼레이션을 수행하는 동안 서비스가 또 다른 서비스를 직접 호출하는 강하게 결합된 서비스가 탄생한다.

이는 `설계 하지 않는 것이 낮은 비용의 소프트웨어로 이어진다` 라는 사상에서 나온것일 수 있다.  
설계하지 않은것으로 기대했던 비용절감은 개발에만 집중한 사람들을 교묘하게 속였던 오류라는것을 이해하는것이 중요하다.

5명의 개발자가 설계없이 프로젝트를 함께 진행하면 5개의 서로 다른 설계가 하나로 뭉뚱그려질 뿐이다.  
개발자들은 `도메인 전문가` 의 혜택을 받지 못해 하나의 비지니스 언어를 각각 지어낸 5개의 해석의 혼합한 결과를 만드는것이다.

이처럼 이를 모델링이라 인정하든 안하든 모델링을 하게 되므로 심사숙고한 설계는 그만큼 중요하다.

좋은것과 효과적인 것은 밀접한 관련이 있다. 이것은 우리가 설계에 좀 더 노력해야 한다는것을 명확하게 말해준다.  
그것은 바로 효과적인 설계다. 이는 정확한 소프트웨어 모델을 생성하도록 가이드한다.

효과적인 설계가 중요한것인지 의심이 든다 해도 그 중요성을 이미 이해하고 있는 사람들의  
통찰을 간과하지 않아야한다.

## 전략적 설계

전략적 설계를 시작 하지 않으면 절대 효과적인 방법으로 전술적인 설계를 적용할 수 없다.  
전략적 설계는 세세한 구현으로 들어가기 앞서 두꺼운 붓 터치처럼 사용하며  비즈니스상 중요도에 따라  
일을 나누고 필요에 따라 통합하는 최적의 방법을 강조한다.

먼저 `바운디드 컨텍스트` 라는 설계 패턴을 사용해 도메인 모델을 분리하는 방법부터 배울것이다.  
또한 이와 밀접한 `바운디드 컨텍스트` 안의 도메인 모델에서 `보편언어(Ubiquitous Language)`에 대해서도 살펴본다.

모델의 `보편언어`를 개발하다보면 개발자는 물론 도메인 전문가의 참여가 중요하다는것을 배울 수 있고  
개발자와 전문가 팀이 협업하는 방법도 알게 된다.

점차 전략적 설계를 진행하며 `서브도메인`이 기존 시스템의 제한되지 않은 복잡성을 다루는 방법과  
`컨텍스트 매핑`을 통해 여러개의 `바운디드 컨텍스트`를 통합하는 방법도 확인할 수 있다.  

## 전술적 설계

전술적 설계는 도메인 모델의 세부사항들을 그리기 위해 얇은 붓을 사용하는것 과 같다.  
가장 중요한 도구중 하나는 `엔티티` 와 `값 객체(Value Object)`를 알맞은 크기의 `애그리게잇`으로 묶는 데  
사용하는 `애그리게잇 패턴`이다.

DDD는 도메인을 최대한 명확한 방법으로 모델링하는 것에 관한 것이다.  
`도메인 이벤트`의 사용은 명확하게 모델링하는 것을 도와주면서 도메인에서 발생한것들을 시스템과 공유하는것을 돕는다.  
공유 대상이 로컬의 `바운디드 컨텍스트` 일 수도 있고 다른 원격의 `바운디드 컨텍스트`일 수도 있다.

>추가) `도메인 서비스`는 도메인 영역에 위치하며 여러 도메인 로직에 걸친 내용을 표현할 때 사용한다.

## 학습 과정과 지식의 정제

개발자들과 그 팀이 비즈니스 핵심 역량에 대해 배워갈때 DDD는 지식을 더욱 발전시킬수 있도록  
생각하는 방법을 알려준다.  

이런 학습과정은 그룹 의사소통과 실험을 통한 발견에 대한 것이며 현 상황에 질문을 던지고 소프트웨어 모델의  
가정에 이의를 제기함으로써 더 많이 배우고 중요한 지식 획득은 팀 전체로 확산된다.

이는 비즈니스와 팀을 위한 상당히 중요한 투자이며 배우고 정제하는 것뿐만 아니라 그것을 빨리  
해내는것을 목표로 삼아야한다.  

이 목표를 돕는 `이벤트 스토밍` 과 같은 부가적인 도구들도 있다.

## 이제 시작해보자!

비록 압축시킨 내용이긴 하지만 DDD 에 대해 많은것을 배울수 있다.  
2장 바운디드 컨텍스트 및 보편언어와 전략적 설계로 시작해보자.
